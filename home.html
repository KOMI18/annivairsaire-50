<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>50 Ans — Une Vie Extraordinaire</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --blue-deep: #0a1628;
    --blue-mid: #1a3a6b;
    --blue-light: #2e5fa3;
    --blue-pale: #d4e3f7;
    --white: #ffffff;
    --off-white: #f5f8ff;
    --text-muted: #6b8ab5;
  }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'Montserrat', sans-serif;
    background: var(--white);
    color: var(--blue-deep);
    overflow-x: hidden;
  }

  /* ——— HERO ——— */
  #hero {
    height: 100vh;
    background: var(--blue-deep);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }

  #hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse 70% 60% at 50% 40%, #1a3a6b 0%, transparent 70%);
  }

  .hero-number {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(140px, 22vw, 280px);
    font-weight: 300;
    color: transparent;
    -webkit-text-stroke: 1px rgba(255,255,255,0.15);
    line-height: 1;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -52%);
    user-select: none;
    letter-spacing: -0.02em;
    animation: heroNumberFade 2s ease forwards;
    opacity: 0;
  }

  @keyframes heroNumberFade {
    to { opacity: 1; }
  }

  .hero-content {
    position: relative;
    z-index: 2;
    text-align: center;
    color: var(--white);
  }

  .hero-subtitle {
    font-family: 'Montserrat', sans-serif;
    font-weight: 300;
    font-size: clamp(11px, 1.4vw, 14px);
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: var(--blue-pale);
    opacity: 0;
    animation: fadeUp 1s 0.4s ease forwards;
  }

  .hero-name {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(48px, 8vw, 96px);
    font-weight: 300;
    letter-spacing: 0.05em;
    margin: 16px 0 8px;
    opacity: 0;
    animation: fadeUp 1s 0.7s ease forwards;
  }

  .hero-years {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-size: clamp(18px, 2.5vw, 28px);
    font-weight: 300;
    color: var(--blue-pale);
    opacity: 0;
    animation: fadeUp 1s 1s ease forwards;
  }

  .hero-scroll {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    color: rgba(255,255,255,0.4);
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    opacity: 0;
    animation: fadeUp 1s 1.5s ease forwards;
  }

  .scroll-line {
    width: 1px;
    height: 50px;
    background: linear-gradient(to bottom, rgba(255,255,255,0.4), transparent);
    animation: scrollPulse 2s infinite;
  }

  @keyframes scrollPulse {
    0%, 100% { opacity: 0.4; transform: scaleY(1); }
    50% { opacity: 1; transform: scaleY(0.7); }
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ——— INTRO ——— */
  #intro {
    background: var(--white);
    padding: 120px 40px;
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
  }

  .section-label {
    font-size: 10px;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 32px;
  }

  .intro-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(26px, 4vw, 42px);
    font-weight: 300;
    line-height: 1.5;
    color: var(--blue-deep);
  }

  .intro-text em {
    font-style: italic;
    color: var(--blue-light);
  }

  /* ——— TIMELINE ——— */
  #timeline {
    background: var(--blue-deep);
    padding: 100px 0;
    position: relative;
  }

  .timeline-header {
    text-align: center;
    color: var(--white);
    padding: 0 40px 80px;
  }

  .timeline-header .section-label {
    color: var(--text-muted);
  }

  .timeline-header h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(36px, 5vw, 64px);
    font-weight: 300;
    color: var(--white);
  }

  .timeline-track {
    position: relative;
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 40px;
  }

  .timeline-spine {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 1px;
    background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.15) 10%, rgba(255,255,255,0.15) 90%, transparent);
    transform: translateX(-50%);
  }

  .chapter {
    display: grid;
    grid-template-columns: 1fr 80px 1fr;
    align-items: center;
    margin-bottom: 100px;
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .chapter.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .chapter:nth-child(even) .chapter-photo { grid-column: 3; grid-row: 1; }
  .chapter:nth-child(even) .chapter-dot   { grid-column: 2; grid-row: 1; }
  .chapter:nth-child(even) .chapter-text  { grid-column: 1; grid-row: 1; text-align: right; }

  .chapter-photo {
    position: relative;
    aspect-ratio: 4/3;
    overflow: hidden;
    background: var(--blue-mid);
    border: 1px solid rgba(255,255,255,0.08);
  }

  .chapter-photo img, .chapter-photo .ph {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255,255,255,0.25);
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  .chapter-photo .ph {
    background: var(--blue-mid);
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .ph-icon {
    width: 40px;
    height: 40px;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
  }

  .ph-icon svg { width: 18px; height: 18px; stroke: rgba(255,255,255,0.3); fill: none; }

  .chapter-dot {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }

  .dot-year {
    font-family: 'Cormorant Garamond', serif;
    font-size: 11px;
    color: rgba(255,255,255,0.4);
    writing-mode: vertical-rl;
    letter-spacing: 0.15em;
  }

  .dot-circle {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 1.5px solid rgba(255,255,255,0.4);
    background: var(--blue-deep);
    flex-shrink: 0;
  }

  .chapter-text {
    padding: 0 32px;
    color: var(--white);
  }

  .chapter-era {
    font-size: 10px;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 16px;
  }

  .chapter-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(24px, 3vw, 36px);
    font-weight: 300;
    line-height: 1.3;
    margin-bottom: 16px;
  }

  .chapter-desc {
    font-size: 13px;
    line-height: 1.8;
    color: rgba(255,255,255,0.55);
    font-weight: 300;
  }

  /* ——— TODAY ——— */
  #today {
    background: var(--off-white);
    padding: 120px 40px;
    text-align: center;
  }

  .today-inner {
    max-width: 900px;
    margin: 0 auto;
  }

  .today-photo-frame {
    width: 300px;
    height: 380px;
    margin: 48px auto;
    background: var(--blue-pale);
    border: 1px solid rgba(10,22,40,0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--text-muted);
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
  }

  .today-photo-frame::before {
    content: '';
    position: absolute;
    inset: 8px;
    border: 1px solid rgba(10,22,40,0.06);
    pointer-events: none;
  }

  .today-photo-icon {
    width: 48px;
    height: 48px;
    border: 1px solid rgba(46,95,163,0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .today-photo-icon svg { width: 22px; height: 22px; stroke: var(--text-muted); fill: none; }

  .today-quote {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(22px, 3.5vw, 38px);
    font-weight: 300;
    font-style: italic;
    line-height: 1.5;
    color: var(--blue-deep);
    max-width: 680px;
    margin: 0 auto 48px;
  }

  /* ——— VOEUX ——— */
  #voeux {
    background: var(--white);
    padding: 100px 40px;
  }

  .voeux-inner {
    max-width: 900px;
    margin: 0 auto;
  }

  .voeux-header {
    text-align: center;
    margin-bottom: 64px;
  }

  .voeux-header h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(36px, 5vw, 56px);
    font-weight: 300;
    color: var(--blue-deep);
    margin-top: 16px;
  }

  /* Form */
  .voeux-form {
    border: 1px solid rgba(10,22,40,0.12);
    padding: 48px;
    margin-bottom: 64px;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-bottom: 24px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-group label {
    font-size: 10px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--text-muted);
  }

  .form-group input,
  .form-group textarea {
    border: none;
    border-bottom: 1px solid rgba(10,22,40,0.15);
    padding: 12px 0;
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    font-weight: 300;
    color: var(--blue-deep);
    background: transparent;
    outline: none;
    transition: border-color 0.3s ease;
    width: 100%;
    resize: none;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    border-bottom-color: var(--blue-light);
  }

  .form-group textarea { min-height: 100px; }

  .form-full { grid-column: 1 / -1; }

  .btn-submit {
    display: inline-block;
    margin-top: 32px;
    padding: 14px 48px;
    background: var(--blue-deep);
    color: var(--white);
    border: 1px solid var(--blue-deep);
    font-family: 'Montserrat', sans-serif;
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    cursor: pointer;
    transition: background 0.3s ease, color 0.3s ease;
  }

  .btn-submit:hover {
    background: transparent;
    color: var(--blue-deep);
  }

  .form-status {
    margin-top: 16px;
    font-size: 13px;
    color: var(--blue-light);
    min-height: 20px;
    font-style: italic;
  }

  /* Messages grid */
  .messages-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1px;
    background: rgba(10,22,40,0.08);
    border: 1px solid rgba(10,22,40,0.08);
  }

  .message-card {
    background: var(--white);
    padding: 32px 28px;
    transition: background 0.2s ease;
  }

  .message-card:hover { background: var(--off-white); }

  .message-author {
    font-size: 11px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--blue-light);
    margin-bottom: 12px;
  }

  .message-relation {
    font-size: 10px;
    letter-spacing: 0.15em;
    color: var(--text-muted);
    display: block;
    margin-top: 2px;
  }

  .message-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 17px;
    font-weight: 300;
    line-height: 1.7;
    color: var(--blue-deep);
    font-style: italic;
  }

  .no-messages {
    text-align: center;
    padding: 64px;
    color: var(--text-muted);
    font-size: 13px;
    letter-spacing: 0.1em;
  }

  /* ——— FOOTER ——— */
  footer {
    background: var(--blue-deep);
    color: rgba(255,255,255,0.3);
    text-align: center;
    padding: 48px 40px;
    font-size: 11px;
    letter-spacing: 0.2em;
  }

  footer span {
    color: rgba(255,255,255,0.6);
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-size: 18px;
    display: block;
    margin-bottom: 12px;
  }

  /* ——— RESPONSIVE ——— */
  @media (max-width: 768px) {
    .chapter {
      grid-template-columns: 1fr;
      gap: 32px;
    }

    .chapter-photo, .chapter-dot, .chapter-text,
    .chapter:nth-child(even) .chapter-photo,
    .chapter:nth-child(even) .chapter-dot,
    .chapter:nth-child(even) .chapter-text {
      grid-column: 1;
      grid-row: auto;
      text-align: left;
    }

    .chapter-dot { flex-direction: row; }
    .dot-year { writing-mode: initial; }

    .timeline-spine { display: none; }

    .form-row { grid-template-columns: 1fr; }

    .voeux-form { padding: 32px 24px; }
  }

  /* ——— REVEAL UTILITY ——— */
  .reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .reveal-delay-1 { transition-delay: 0.15s; }
  .reveal-delay-2 { transition-delay: 0.3s; }
  .reveal-delay-3 { transition-delay: 0.45s; }
</style>
</head>
<body>

<!-- ===== HERO ===== -->
<section id="hero">
  <div class="hero-number">50</div>
  <div class="hero-content">
    <p class="hero-subtitle">Une vie célébrée</p>
    <h1 class="hero-name">[Prénom Nom]</h1>
    <p class="hero-years">1975 — 2025</p>
  </div>
  <div class="hero-scroll">
    <div class="scroll-line"></div>
    Défiler
  </div>
</section>

<!-- ===== INTRO ===== -->
<section id="intro">
  <div class="reveal">
    <p class="section-label">Cinquante années</p>
    <p class="intro-text">
      Cinquante années de <em>rires</em>, de rencontres,<br>
      de courage et d'amour — une vie construite<br>
      avec soin, chapitre après chapitre.
    </p>
  </div>
</section>

<!-- ===== TIMELINE ===== -->
<section id="timeline">
  <div class="timeline-header reveal">
    <p class="section-label">Le voyage</p>
    <h2>Une vie en chapitres</h2>
  </div>

  <div class="timeline-track">
    <div class="timeline-spine"></div>

    <!-- Chapter 1 — Enfance -->
    <div class="chapter">
      <div class="chapter-photo">
        <div class="ph">
          <div class="ph-icon">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          </div>
          Photo — Bébé / Enfance
        </div>
      </div>
      <div class="chapter-dot">
        <div class="dot-year">1975</div>
        <div class="dot-circle"></div>
      </div>
      <div class="chapter-text">
        <p class="chapter-era">Les premières années · 1975 – 1985</p>
        <h3 class="chapter-title">L'enfance,<br>là où tout commence</h3>
        <p class="chapter-desc">
          Quelques lignes ici pour raconter les premières années —
          l'endroit où il a grandi, ses premiers souvenirs, 
          sa famille, ce qui le rendait unique dès le plus jeune âge.
        </p>
      </div>
    </div>

    <!-- Chapter 2 — Jeunesse -->
    <div class="chapter">
      <div class="chapter-text">
        <p class="chapter-era">La jeunesse · 1985 – 1995</p>
        <h3 class="chapter-title">Les années de<br>construction</h3>
        <p class="chapter-desc">
          L'adolescence, les amis, les passions qui se dessinent.
          Ces années qui forgent le caractère et les convictions.
          Les premières grandes aventures de la vie.
        </p>
      </div>
      <div class="chapter-dot">
        <div class="dot-year">1990</div>
        <div class="dot-circle"></div>
      </div>
      <div class="chapter-photo">
        <div class="ph">
          <div class="ph-icon">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          </div>
          Photo — Jeunesse
        </div>
      </div>
    </div>

    <!-- Chapter 3 — Rencontre -->
    <div class="chapter">
      <div class="chapter-photo">
        <div class="ph">
          <div class="ph-icon">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          </div>
          Photo — Avec sa fiancée
        </div>
      </div>
      <div class="chapter-dot">
        <div class="dot-year">2000</div>
        <div class="dot-circle"></div>
      </div>
      <div class="chapter-text">
        <p class="chapter-era">L'amour · ~2000</p>
        <h3 class="chapter-title">La rencontre<br>qui a tout changé</h3>
        <p class="chapter-desc">
          L'histoire d'une rencontre, d'un coup de cœur devenu 
          une vie partagée. Quelques mots sur celle qui est 
          aujourd'hui sa femme, sa complice, son roc.
        </p>
      </div>
    </div>

    <!-- Chapter 4 — Enfants -->
    <div class="chapter">
      <div class="chapter-text">
        <p class="chapter-era">La famille · 2000s</p>
        <h3 class="chapter-title">La plus belle<br>des aventures</h3>
        <p class="chapter-desc">
          Devenir père — un tournant, une responsabilité,
          une fierté infinie. Ses enfants, son héritage vivant,
          la preuve que l'amour se multiplie sans jamais se diviser.
        </p>
      </div>
      <div class="chapter-dot">
        <div class="dot-year">2005</div>
        <div class="dot-circle"></div>
      </div>
      <div class="chapter-photo">
        <div class="ph">
          <div class="ph-icon">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          </div>
          Photo — Avec ses enfants
        </div>
      </div>
    </div>

  </div>
</section>

<!-- ===== TODAY ===== -->
<section id="today">
  <div class="today-inner">
    <div class="reveal">
      <p class="section-label">Aujourd'hui</p>
      <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(36px,5vw,60px);font-weight:300;color:var(--blue-deep);margin-bottom:0;">
        50 ans, et le plus beau reste à venir
      </h2>
    </div>

    <div class="today-photo-frame reveal reveal-delay-1">
      <div class="today-photo-icon">
        <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
      </div>
      Photo aujourd'hui
    </div>

    <p class="today-quote reveal reveal-delay-2">
      « Cinquante ans, c'est la somme de tout ce qu'on a vécu —
      et la promesse de tout ce qui reste encore à vivre. »
    </p>
  </div>
</section>

<!-- ===== VOEUX ===== -->
<section id="voeux">
  <div class="voeux-inner">
    <div class="voeux-header reveal">
      <p class="section-label">À ceux qui l'aiment</p>
      <h2>Laissez un message</h2>
    </div>

    <div class="voeux-form reveal">
      <div class="form-row">
        <div class="form-group">
          <label>Votre prénom</label>
          <input type="text" id="input-name" placeholder="Votre prénom">
        </div>
        <div class="form-group">
          <label>Votre lien</label>
          <input type="text" id="input-relation" placeholder="ex. Ami d'enfance, collègue...">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group form-full">
          <label>Votre message</label>
          <textarea id="input-message" placeholder="Votre vœu, votre souvenir, votre mot du cœur…"></textarea>
        </div>
      </div>
      <button class="btn-submit" onclick="submitVoeu()">Envoyer mon message</button>
      <p class="form-status" id="form-status"></p>
    </div>

    <div id="messages-container">
      <div class="no-messages" id="no-messages">Les messages apparaîtront ici.</div>
      <div class="messages-grid" id="messages-grid" style="display:none;"></div>
    </div>
  </div>
</section>

<!-- ===== FOOTER ===== -->
<footer>
  <span>Joyeux 50e anniversaire</span>
  Avec tout notre amour — 2025
</footer>

<!-- ===== FIREBASE ===== -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp }
    from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // !! REMPLACE PAR TA CONFIG FIREBASE !!
  const firebaseConfig = {
    apiKey: "VOTRE_API_KEY",
    authDomain: "VOTRE_PROJECT.firebaseapp.com",
    projectId: "VOTRE_PROJECT_ID",
    storageBucket: "VOTRE_PROJECT.appspot.com",
    messagingSenderId: "VOTRE_SENDER_ID",
    appId: "VOTRE_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const voeuxCol = collection(db, "voeux");

  // Listen for new messages
  const q = query(voeuxCol, orderBy("timestamp", "desc"));
  onSnapshot(q, (snapshot) => {
    const cards = [];
    snapshot.forEach(doc => {
      const d = doc.data();
      cards.push(`
        <div class="message-card">
          <p class="message-author">
            ${escHtml(d.name)}
            <span class="message-relation">${escHtml(d.relation || '')}</span>
          </p>
          <p class="message-text">${escHtml(d.message)}</p>
        </div>
      `);
    });
    const grid = document.getElementById('messages-grid');
    const noMsg = document.getElementById('no-messages');
    if (cards.length) {
      grid.innerHTML = cards.join('');
      grid.style.display = 'grid';
      noMsg.style.display = 'none';
    } else {
      grid.style.display = 'none';
      noMsg.style.display = 'block';
    }
  });

  window.submitVoeu = async function() {
    const name    = document.getElementById('input-name').value.trim();
    const relation= document.getElementById('input-relation').value.trim();
    const message = document.getElementById('input-message').value.trim();
    const status  = document.getElementById('form-status');

    if (!name || !message) {
      status.textContent = 'Veuillez renseigner votre prénom et votre message.';
      return;
    }
    if (message.length > 600) {
      status.textContent = 'Le message est trop long (600 caractères maximum).';
      return;
    }

    try {
      status.textContent = 'Envoi en cours…';
      await addDoc(voeuxCol, { name, relation, message, timestamp: serverTimestamp() });
      status.textContent = 'Votre message a bien été envoyé. Merci !';
      document.getElementById('input-name').value = '';
      document.getElementById('input-relation').value = '';
      document.getElementById('input-message').value = '';
      setTimeout(() => status.textContent = '', 4000);
    } catch (err) {
      console.error(err);
      status.textContent = 'Une erreur est survenue. Veuillez réessayer.';
    }
  };

  function escHtml(str) {
    return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }
</script>

<!-- ===== SCROLL ANIMATIONS ===== -->
<script>
  // Intersection Observer for reveal animations
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.12 });

  document.querySelectorAll('.reveal, .chapter').forEach(el => observer.observe(el));

  // Parallax on hero number
  const heroNum = document.querySelector('.hero-number');
  window.addEventListener('scroll', () => {
    const scrolled = window.scrollY;
    if (heroNum && scrolled < window.innerHeight) {
      heroNum.style.transform = `translate(-50%, calc(-52% + ${scrolled * 0.3}px))`;
    }
  }, { passive: true });
</script>

</body>
</html>